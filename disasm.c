#include "disasm.h"
#define op(c, s, n, p) \
    code_maps[0x##c].op_name = s; \
    code_maps[0x##c].op_len = n; \
    code_maps[0x##c].cycle = p; \

void init_code()
{
    op(00, "BRK", 1, 7)
    op(01, "ORA", 2, 6)
    op(05, "ORA", 2, 3)
    op(06, "ASL", 2, 5)
    op(08, "PHP", 1, 3)
    op(09, "ORA", 2, 2)
    op(0A, "ASL", 1, 2)
    op(0D, "ASL", 3, 4)
    op(0E, "ASL", 3, 6)

    op(10, "BPL", 2, 2)
    op(11, "ORA", 2, 5)
    op(15, "ORA", 2, 4)
    op(16, "ASL", 2, 6)
    op(18, "CLC", 1, 2)
    op(19, "ORA", 3, 4)
    op(1D, "ORA", 3, 4)
    op(1E, "ASL", 3, 7)

    op(20, "JSR", 3, 6)
    op(21, "AND", 2, 6)
    op(24, "BIT", 2, 4)
    op(25, "AND", 2, 3)
    op(26, "ROL", 2, 5)
    op(28, "PLP", 1, 4)
    op(29, "AND", 2, 2)
    op(2A, "ORL", 1, 2)
    op(2C, "BIT", 3, 4)
    op(2D, "AND", 3, 4)
    op(2E, "ROL", 3, 6)

    op(30, "BMI", 2, 2)
    op(31, "AND", 2, 5)
    op(35, "AND", 2, 4)
    op(36, "ROL", 2, 6)
    op(38, "SEC", 1, 2)
    op(39, "AND", 3, 4)
    op(3D, "AND", 3, 4)
    op(3E, "ROL", 3, 7)

    op(40, "RTI", 1, 6)
    op(41, "EOR", 2, 6)
    op(45, "EOR", 2, 3)
    op(46, "LSR", 2, 5)
    op(48, "PHA", 1, 3)
    op(49, "EOR", 2, 2)
    op(4A, "LSR", 1, 2)
    op(4C, "JMP", 3, 3)
    op(4D, "EOR", 3, 4)
    op(4E, "LSR", 3, 6)

    op(50, "BVC", 2, 2)
    op(51, "EOR", 2, 5)
    op(55, "EOR", 2, 4)
    op(56, "LSR", 2, 6)
    op(58, "CLI", 1, 2)
    op(59, "EOR", 3, 4)
    op(5D, "EOR", 3, 4)
    op(5E, "LSR", 3, 7)

    op(60, "RTS", 1, 6)
    op(61, "ADC", 2, 6)
    op(65, "ADC", 2, 3)
    op(66, "ROR", 2, 5)
    op(68, "PLA", 1, 4)
    op(69, "ADC", 2, 2)
    op(6A, "ROR", 1, 2)
    op(6C, "JMP", 3, 5)
    op(6D, "ADC", 3, 4)
    op(6E, "ROR", 3, 6)

    op(70, "BVS", 2, 2)
    op(71, "ADC", 2, 5)
    op(75, "ADC", 2, 4)
    op(76, "ROR", 3, 6)
    op(78, "SEI", 3, 2)
    op(79, "ADC", 3, 4)
    op(7D, "ADC", 3, 4)
    op(7E, "ROR", 3, 7)

    op(81, "STA", 2, 6)
    op(84, "STY", 2, 3)
    op(85, "STA", 2, 3)
    op(86, "STX", 2, 3)
    op(88, "DEY", 1, 2)
    op(8A, "TXA", 1, 2)
    op(8C, "STY", 3, 4)
    op(8D, "STA", 3, 4)
    op(8E, "STX", 3, 4)

    op(90, "BCC", 2, 2)
    op(91, "STA", 2, 6)
    op(94, "STY", 2, 4)
    op(95, "STA", 2, 4)
    op(96, "STX", 2, 4)
    op(98, "TYA", 1, 2)
    op(99, "STA", 3, 5)
    op(9A, "TXS", 1, 2)
    op(9D, "STA", 3, 5)

    op(A0, "LDY", 2, 2)
    op(A1, "LDA", 2, 6)
    op(A2, "LDX", 2, 2)
    op(A4, "LDY", 2, 3)
    op(A5, "LDA", 2, 3)
    op(A6, "LDX", 2, 3)
    op(A8, "TAY", 1, 2)
    op(A9, "LDA", 2, 2)
    op(AA, "TAX", 1, 2)
    op(AC, "LDY", 3, 4)
    op(AD, "LDA", 3, 4)
    op(AE, "LDX", 3, 4)

    op(B0, "BCS", 2, 2)
    op(B1, "LDA", 2, 5)
    op(B4, "LDY", 2, 4)
    op(B5, "LDA", 2, 4)
    op(B6, "LDX", 2, 4)
    op(B8, "CLV", 1, 2)
    op(B9, "LDA", 3, 4)
    op(BA, "TSX", 1, 2)
    op(BC, "LDY", 3, 4)
    op(BD, "LDA", 3, 4)
    op(BE, "LDX", 3, 4)

    op(C0, "CPY", 2, 2)
    op(C1, "CMP", 2, 6)
    op(C4, "CPY", 2, 3)
    op(C5, "CMP", 2, 3)
    op(C6, "DEC", 2, 5)
    op(C8, "INY", 1, 2)
    op(C9, "CMP", 2, 2)
    op(CA, "DEX", 1, 2)
    op(CC, "CPY", 3, 4)
    op(CD, "CMP", 3, 4)
    op(CE, "DEC", 3, 6)

    op(D0, "BNE", 2, 2)
    op(D1, "CMP", 2, 5)
    op(D5, "CMP", 2, 4)
    op(D6, "DEC", 2, 6)
    op(D8, "CLD", 1, 2)
    op(D9, "CMP", 3, 4)
    op(DD, "CMP", 3, 4)
    op(DE, "DEC", 3, 7)

    op(E0, "CPX", 2, 2)
    op(E1, "SBC", 2, 6)
    op(E4, "CPX", 2, 3)
    op(E5, "SBC", 2, 3)
    op(E6, "INC", 2, 5)
    op(E8, "INX", 1, 2)
    op(E9, "SBC", 2, 2)
    op(EA, "NOP", 1, 2)
    op(EC, "CPX", 3, 4)
    op(ED, "SBC", 3, 4)
    op(EE, "INC", 3, 6)

    op(F0, "BEQ", 2, 2)
    op(F1, "SBC", 2, 5)
    op(F5, "SBC", 2, 4)
    op(F6, "INC", 2, 6)
    op(F8, "SED", 1, 2)
    op(F9, "SBC", 3, 4)
    op(FD, "SBC", 3, 4)
    op(FE, "INC", 3, 7)

    //code_maps[0x]
}

void display(BYTE *data, size_t count)
{
    size_t c = 0;
    for(c = 0; c < count; ++c){
        printf("%02X", data[c]);
        if((c + 1) % 32 == 0) { printf("\n"); continue; }
        if((c + 1) % 4 == 0) printf(" ");
    }
}